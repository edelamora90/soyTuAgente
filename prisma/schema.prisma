generator client {
  provider = "prisma-client-js"
}

model AdminUser {
  id           String    @id
  email        String    @unique
  username     String?   @unique
  passwordHash String
  roles        String[]  @default(["admin"])
  isActive     Boolean   @default(true)
  tokenVersion Int       @default(0)
  lastLoginAt  DateTime?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Agent {
  id              String   @id @default(cuid())
  slug            String   @unique
  nombre          String
  cedula          String
  verificado      Boolean  @default(false)
  avatar          String?
  ubicacion       String
  whatsapp        String?
  especialidades  String[]
  experiencia     String[]
  servicios       String[]
  certificaciones String[]
  aseguradoras    String[]
  mediaThumbs     String[]
  mediaHero       String
  redes           Json?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model AgentSubmission {
  id             String           @id @default(cuid())
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  status         SubmissionStatus @default(PENDING)
  reviewedAt     DateTime?
  reviewedById   String?
  reviewNotes    String?
  slug           String           @unique
  nombre         String
  cedula         String?
  verificado     Boolean?         @default(false)
  foto           String?
  ubicacion      String?
  whatsapp       String?
  especialidades String[]         @default([])
  experiencia    String?
  servicios      String[]         @default([])
  aseguradoras   String?
  logroDestacado String?
  logosAseg      String[]         @default([])
  fotosMini      String[]         @default([])
  fotoHero       String?
  facebook       String?
  instagram      String?
  linkedin       String?
  tiktok         String?
}

enum SubmissionStatus {
  PENDING
  APPROVED
  REJECTED
}

model Post {
  id          String    @id @default(uuid())
  title       String
  slug        String    @unique
  img         String? // URL o path a imagen
  tag         String? // etiqueta corta (p.e. "Tendencias" )
  topic       String? // tema o categoría
  readMinutes Int       @default(5)
  contentMd    String?   @db.Text
  content      String?   @db.Text
  date        DateTime  @default(now()) // fecha del artículo (puede ser de publicación o editorial)
  externalUrl String?   @map("external_url")
  published   Boolean   @default(false)
  publishedAt DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  isFeatured   Boolean  @default(false)

  @@index([published, publishedAt])
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  
}
