import{a as v}from"./chunk-2EKWLGMH.js";import{a as Y}from"./chunk-RIVHAWGD.js";import{c as Pe,d as ie,e as ke,f as Oe,g as we,h as Ae,i as Se,k as Ee,l as Le}from"./chunk-SNNRYO6Z.js";import{a as ye}from"./chunk-RPALSS5Z.js";import{a as $}from"./chunk-MUZ76X6A.js";import{a as he,c as xe,d as E,e as G,f as Ce,g as ve,h as Me}from"./chunk-6A4NGTZS.js";import{$ as V,$a as r,Bb as fe,K as le,Ka as C,Oa as y,P as w,Tb as j,U as g,Wb as S,Ya as N,Z as f,Za as b,_ as h,_a as i,a as I,aa as F,ab as d,b as D,bc as be,c as m,cc as U,dc as _e,eb as J,ec as B,fb as ee,ga as pe,gb as P,hb as l,jb as p,n as se,nb as te,ob as ue,pb as A,q as O,qb as s,rb as k,sb as ge,ub as ne,xa as me,ya as de,z as ce,za as c,zb as oe}from"./chunk-A5EMK4AJ.js";var Te=()=>({exact:!0});function Ne(n,e){n&1&&(J(0),i(1,"a",15),s(2,"Unirme a Soy tu Agente"),r(),ee())}function ze(n,e){if(n&1){let t=P();i(0,"div",22)(1,"a",23),l("click",function(){f(t);let a=p(2);return h(a.closeMenu())}),s(2,"Dashboard"),r(),i(3,"a",24),l("click",function(){f(t);let a=p(2);return h(a.closeMenu())}),s(4,"Editar"),r(),i(5,"button",25),l("click",function(){f(t);let a=p(2);return a.closeMenu(),h(a.logout())}),s(6,"Salir"),r()()}}function Re(n,e){if(n&1){let t=P();i(0,"div",16)(1,"button",17),l("click",function(){f(t);let a=p();return h(a.userOpen=!a.userOpen)}),i(2,"span",18),s(3),r(),i(4,"span",19),s(5),r(),i(6,"span",20),s(7,"\u25BE"),r()(),y(8,ze,7,0,"div",21),r()}if(n&2){let t=p();A("open",t.userOpen),c(),N("aria-expanded",t.userOpen),c(2),k(t.initials()),c(2),k(t.shortName()),c(3),b("ngIf",t.userOpen)}}function De(n,e){if(n&1){let t=P();J(0),i(1,"a",31),l("click",function(){f(t);let a=p(2);return h(a.closeMenu())}),s(2,"Unirme a Soy tu Agente"),r(),ee()}}function je(n,e){if(n&1){let t=P();i(0,"div",32)(1,"div",33)(2,"span",18),s(3),r(),i(4,"div",34)(5,"div",19),s(6),r()()(),i(7,"a",35),l("click",function(){f(t);let a=p(2);return h(a.closeMenu())}),s(8,"Dashboard"),r(),i(9,"a",36),l("click",function(){f(t);let a=p(2);return h(a.closeMenu())}),s(10,"Editar"),r(),i(11,"button",37),l("click",function(){f(t);let a=p(2);return a.closeMenu(),h(a.logout())}),s(12,"Salir"),r()()}if(n&2){let t=p(2);c(3),k(t.initials()),c(3),k(t.shortName())}}function Ue(n,e){if(n&1){let t=P();i(0,"nav",26)(1,"a",27),l("click",function(){f(t);let a=p();return h(a.closeMenu())}),s(2,"Inicio"),r(),i(3,"a",28),l("click",function(){f(t);let a=p();return h(a.closeMenu())}),s(4,"Nosotros"),r(),i(5,"a",29),l("click",function(){f(t);let a=p();return h(a.closeMenu())}),s(6,"Certificaciones"),r(),i(7,"a",30),l("click",function(){f(t);let a=p();return h(a.closeMenu())}),s(8,"Buscar Agente"),r(),y(9,De,3,0,"ng-container",12)(10,je,13,2,"ng-template",null,1,oe),r()}if(n&2){let t=te(11),o=p();c(),b("routerLinkActiveOptions",ne(3,Te)),c(8),b("ngIf",!o.isLoggedIn())("ngIfElse",t)}}var q=class n{open=!1;userOpen=!1;auth=g(v);router=g(E);isLoggedIn(){return!!(this.auth.user?.()?.username||localStorage.getItem("auth_name"))}displayName(){return this.auth.user?.()?.username||localStorage.getItem("auth_name")||"Usuario"}initials(){let e=this.displayName().trim();if(!e)return"US";let t=e.split(/\s+/),o=(t[0]?.[0]||"").toUpperCase(),a=(t[1]?.[0]||"").toUpperCase();return o+(a||"")||"US"}shortName(){let e=this.displayName().trim(),[t,o]=e.split(/\s+/);return[t,o].filter(Boolean).join(" ")}closeMenu(){this.open=!1,this.userOpen=!1}logout(){return m(this,null,function*(){this.auth.logout?.(),localStorage.removeItem("auth_name"),this.closeMenu(),this.router.navigateByUrl("/")})}goAccount(){this.closeMenu(),this.router.navigateByUrl("/cuenta")}onResize(){window.innerWidth>=1024&&this.open&&(this.open=!1)}onDocClick(e){e.target.closest(".user-menu")||(this.userOpen=!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-header"]],hostBindings:function(t,o){t&1&&l("resize",function(){return o.onResize()},me)("click",function(u){return o.onDocClick(u)},de)},decls:22,vars:8,consts:[["loggedActions",""],["mobileLogged",""],[1,"site-header"],[1,"container"],["routerLink","/","aria-label","Soy tu Agente",1,"brand"],["src","assets/logo.svg","alt","Soy tu Agente"],["aria-label","Navegaci\xF3n principal",1,"primary-nav"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/nosotros","routerLinkActive","active"],["routerLink","/certificaciones","routerLinkActive","active"],["routerLink","/agentes","routerLinkActive","active"],[1,"actions"],[4,"ngIf","ngIfElse"],["type","button","aria-label","Abrir men\xFA",1,"hamb",3,"click"],["class","mobile-menu","aria-label","Men\xFA m\xF3vil",4,"ngIf"],["routerLink","/unirme",1,"btn-cta"],[1,"user-menu"],["type","button","aria-haspopup","menu",1,"user-btn",3,"click"],[1,"avatar"],[1,"name"],[1,"chev"],["class","menu","role","menu",4,"ngIf"],["role","menu",1,"menu"],["role","menuitem","routerLink","/admin",3,"click"],["role","menuitem","routerLink","/admin/cuenta",3,"click"],["role","menuitem","type","button",3,"click"],["aria-label","Men\xFA m\xF3vil",1,"mobile-menu"],["routerLink","/","routerLinkActive","active",3,"click","routerLinkActiveOptions"],["routerLink","/nosotros","routerLinkActive","active",3,"click"],["routerLink","/certificaciones","routerLinkActive","active",3,"click"],["routerLink","/agentes","routerLinkActive","active",3,"click"],["routerLink","/unirme",1,"btn-cta",3,"click"],[1,"mobile-user"],[1,"mu-head"],[1,"col"],["routerLink","/admin",3,"click"],["routerLink","/admin/cuenta",3,"click"],["type","button",3,"click"]],template:function(t,o){if(t&1){let a=P();i(0,"header",2)(1,"div",3)(2,"a",4),d(3,"img",5),r(),i(4,"nav",6)(5,"a",7),s(6,"Inicio"),r(),i(7,"a",8),s(8,"Nosotros"),r(),i(9,"a",9),s(10,"Certificaciones"),r(),i(11,"a",10),s(12,"Buscar Agente"),r()(),i(13,"div",11),y(14,Ne,3,0,"ng-container",12)(15,Re,9,6,"ng-template",null,0,oe),i(17,"button",13),l("click",function(){return f(a),h(o.open=!o.open)}),d(18,"span")(19,"span")(20,"span"),r()()(),y(21,Ue,12,4,"nav",14),r()}if(t&2){let a=te(16);A("is-open",o.open),c(5),b("routerLinkActiveOptions",ne(7,Te)),c(9),b("ngIf",!o.isLoggedIn())("ngIfElse",a),c(3),N("aria-expanded",o.open),c(4),b("ngIf",o.open)}},dependencies:[S,j,G,Ce],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--header-h: 115px;--header-h-sm: 100px}.site-header[_ngcontent-%COMP%]{position:sticky;top:0;padding-top:5px;z-index:50;background:#fff;border-bottom:1px solid var(--border, #e9efec);box-shadow:0 1px #1018280a}.site-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:var(--header-h);display:flex;align-items:center;justify-content:space-between;gap:20px;margin-top:40px;margin-bottom:40px}.brand[_ngcontent-%COMP%]{min-width:160px}.brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:48px;display:block}.primary-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:clamp(18px,4vw,56px);margin:0 auto}.primary-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:800;font-size:22px;color:#132e35;text-decoration:none;white-space:nowrap;transition:color .2s ease;padding:6px 0}.primary-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0a7c4b}.primary-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#0b2f34;text-decoration:underline;text-underline-offset:.28em}.actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;gap:10px}.btn-cta[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:44px;padding:0 18px;border-radius:999px;font-weight:800;background:#0b2f34;color:#e8f3ff;text-decoration:none;font-size:18px;border:0;transition:background .2s ease,transform .2s ease}.btn-cta[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,#0b2f34 85%,black);transform:translateY(-1px)}.hamb[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:10px;border:1px solid #e6ecea;background:#fff;display:none;place-items:center;padding:0;margin-left:8px}.hamb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:20px;height:2px;background:#0b2f34;margin:4px auto;transition:transform .2s ease,opacity .2s ease}.mobile-menu[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:var(--header-h);background:#fff;border-bottom:1px solid var(--border, #e9efec);box-shadow:0 10px 30px #10182814;display:grid;gap:6px;padding:12px 16px 16px}.mobile-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 8px;border-radius:10px;text-decoration:none;color:#0b2f34;font-weight:700}.mobile-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f2f6f4}.mobile-menu[_ngcontent-%COMP%]   a.btn-cta[_ngcontent-%COMP%]{margin-top:6px}@media (max-width: 1024px){.site-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:var(--header-h-sm)}.primary-nav[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]   .btn-cta[_ngcontent-%COMP%]{display:none}.hamb[_ngcontent-%COMP%]{display:grid}.mobile-menu[_ngcontent-%COMP%]{top:var(--header-h-sm)}}.site-header.is-open[_ngcontent-%COMP%]   .hamb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:translateY(6px) rotate(45deg)}.site-header.is-open[_ngcontent-%COMP%]   .hamb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){opacity:0}.site-header.is-open[_ngcontent-%COMP%]   .hamb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-6px) rotate(-45deg)}.user-menu[_ngcontent-%COMP%]{position:relative;margin-right:8px}.user-btn[_ngcontent-%COMP%]{border:1px solid #d0d5dd;background:#fff;height:40px;border-radius:999px;padding:0 10px 0 6px;display:inline-flex;align-items:center;gap:8px;cursor:pointer}.user-btn[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;background:#0fb366;color:#fff;display:inline-grid;place-items:center;font-weight:800;font-size:12px}.user-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:800;color:#0b2f34}.user-btn[_ngcontent-%COMP%]   .chev[_ngcontent-%COMP%]{font-size:12px;color:#6a7f79;margin-left:2px}.user-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{position:absolute;right:0;top:calc(100% + 8px);min-width:200px;background:#fff;border:1px solid #e9efec;border-radius:12px;box-shadow:0 10px 30px #1018281f;padding:6px;display:grid;gap:4px;z-index:1000}.user-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;border:0;background:transparent;padding:10px 12px;border-radius:10px;cursor:pointer;color:#0b2f34;font-weight:700;width:100%}.user-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f8f7}.mobile-user[_ngcontent-%COMP%]{border-top:1px solid #e9efec;margin-top:8px;padding-top:8px;display:grid;gap:6px}.mobile-user[_ngcontent-%COMP%]   .mu-head[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.mobile-user[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;background:#0fb366;color:#fff;display:inline-grid;place-items:center;font-weight:800;font-size:12px}.mobile-user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:800;color:#0b2f34}.mobile-user[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 0;text-decoration:none;color:#0b2f34;font-weight:700}.mobile-user[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.mobile-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .user-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:0;padding:8px 0;text-align:left;color:#0b2f34;font-weight:700;cursor:pointer}.mobile-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{text-decoration:underline}']})};var K=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-footer"]],decls:62,vars:0,consts:[[1,"site-footer"],[1,"container","footer-top"],[1,"ft-brand"],["routerLink","/","aria-label","Soy tu Agente",1,"logo"],["src","assets/logo-light.svg","alt","Soy tu Agente"],[1,"lead"],[1,"ft-col"],["routerLink","/"],["routerLink","/nosotros"],["routerLink","/certificaciones"],["routerLink","/agentes"],["routerLink","/contacto"],["routerLink","/faq"],["routerLink","/legal"],["routerLink","/noticias"],["routerLink","/portal",1,"portal-link"],[1,"ft-actions"],["routerLink","/unirme",1,"btn-cta"],[1,"social"],["href","#","aria-label","LinkedIn",1,"ico","ln"],["viewBox","0 0 24 24"],["d","M4.98 3.5A2.5 2.5 0 1 1 5 8.5 2.5 2.5 0 0 1 4.98 3.5zM3 9h4v12H3zM14.5 9c-2.2 0-3.5 1.2-3.5 2.9V21h4v-7c0-1 .7-1.7 1.8-1.7 1 0 1.7.7 1.7 1.7V21h4v-7.8C22.5 10.6 20.9 9 18.5 9c-1.4 0-2.6.6-3.2 1.6V9h-0.8z","fill","currentColor"],["href","#","aria-label","Instagram",1,"ico","ig"],["d","M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5zm5.25-3.25a1 1 0 1 1-1 1 1 1 0 0 1 1-1z","fill","currentColor"],["href","#","aria-label","Facebook",1,"ico","fb"],["d","M13 22v-8h3l1-4h-4V7.5c0-1.2.4-2 2-2h2V2.1C16.6 2 15.2 2 14 2c-3 0-5 1.8-5 5.2V10H6v4h3v8z","fill","currentColor"],["href","#","aria-label","TikTok",1,"ico","tk"],["d","M20 8.6a6.6 6.6 0 0 1-4.1-1.4V16a6 6 0 1 1-6-6 6.2 6.2 0 0 1 1.6.2v3A2.8 2.8 0 1 0 9 16.8 2.8 2.8 0 0 0 11.8 14V2h3a6.6 6.6 0 0 0 5.2 6.6z","fill","currentColor"],[1,"ft-div"],[1,"container","footer-bottom"]],template:function(t,o){t&1&&(i(0,"footer",0)(1,"div",1)(2,"div",2)(3,"a",3),d(4,"img",4),r(),i(5,"p",5),s(6," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. "),r()(),i(7,"nav",6)(8,"h4"),s(9,"Navegaci\xF3n"),r(),i(10,"ul")(11,"li")(12,"a",7),s(13,"Inicio"),r()(),i(14,"li")(15,"a",8),s(16,"Nosotros"),r()(),i(17,"li")(18,"a",9),s(19,"Certificaciones"),r()(),i(20,"li")(21,"a",10),s(22,"Buscar agente"),r()(),i(23,"li")(24,"a",11),s(25,"Contactanos"),r()()()(),i(26,"nav",6)(27,"h4"),s(28,"Ayuda"),r(),i(29,"ul")(30,"li")(31,"a",12),s(32,"FAQ"),r()(),i(33,"li")(34,"a",13),s(35,"Legal"),r()(),i(36,"li")(37,"a",14),s(38,"Noticias"),r()(),i(39,"li")(40,"a",15),s(41,"Portal de agentes"),r()()()(),i(42,"div",16)(43,"a",17),s(44,"Unirme a Soy tu Agente"),r(),i(45,"div",18)(46,"a",19),V(),i(47,"svg",20),d(48,"path",21),r()(),F(),i(49,"a",22),V(),i(50,"svg",20),d(51,"path",23),r()(),F(),i(52,"a",24),V(),i(53,"svg",20),d(54,"path",25),r()(),F(),i(55,"a",26),V(),i(56,"svg",20),d(57,"path",27),r()()()()(),F(),d(58,"hr",28),i(59,"div",29)(60,"small"),s(61," Todos los derechos reservados | Soytuagente.mx [2025] | Encuentra a tu agente de seguros perfecto "),r()()())},dependencies:[S,G],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--footer-bg: #003c4f;--footer-muted: #c7e4dc;--footer-text: #eaf6f2;--brand: #0fb366}.site-footer[_ngcontent-%COMP%]{background:var(--footer-bg);color:var(--footer-text);padding-top:clamp(28px,4vw,44px);padding-bottom:clamp(18px,3vw,28px)}.footer-top[_ngcontent-%COMP%]{display:grid;grid-template-columns:2.2fr 1fr 1fr 1.6fr;gap:clamp(20px,4vw,48px);align-items:start}.ft-brand[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:48px;display:block}.ft-brand[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{margin-top:14px;color:var(--footer-muted);font-size:clamp(16px,1.6vw,20px);line-height:1.5;max-width:640px}.ft-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:800;font-size:clamp(16px,1.4vw,22px);margin:0 0 10px}.ft-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:10px}.ft-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--footer-text);text-decoration:none;font-size:clamp(15px,1.2vw,20px);opacity:.9}.ft-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline;text-underline-offset:.25em}.portal-link[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem}.ft-actions[_ngcontent-%COMP%]{display:grid;gap:18px;justify-items:end}.btn-cta[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:44px;padding:0 18px;border-radius:999px;font-weight:800;background:#0fb366;color:#e8f3ff;text-decoration:none;font-size:18px;border:0;transition:background .2s ease,transform .2s ease}.btn-cta[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,#0fb366 85%,black);transform:translateY(-1px)}.social[_ngcontent-%COMP%]{display:flex;gap:18px}.social[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:28px;height:28px;color:var(--footer-text);opacity:.9;display:inline-grid;place-items:center}.social[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]:hover{opacity:1}.ft-div[_ngcontent-%COMP%]{border:0;height:1px;margin:clamp(22px,3vw,32px) 0;background:#eaf6f22e}.footer-bottom[_ngcontent-%COMP%]{text-align:center}.footer-bottom[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--footer-muted);font-size:18px}@media (max-width: 1100px){.footer-top[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.ft-actions[_ngcontent-%COMP%]{justify-items:start}}@media (max-width: 640px){.footer-top[_ngcontent-%COMP%]{grid-template-columns:1fr}.ft-brand[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{max-width:none}.ft-actions[_ngcontent-%COMP%]{justify-items:stretch}.btn-join[_ngcontent-%COMP%]{width:100%}}']})};var W=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,o){t&1&&d(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[xe,q,K],encapsulation:2})};var Q=class n{auth=g(v);needsAuth(e){let t=e.url.includes("/api/submissions"),o=t&&e.method==="POST";return t&&!o}intercept(e,t){let o=this.needsAuth(e),a=this.auth.accessToken,u=o&&a?e.clone({setHeaders:{Authorization:`Bearer ${a}`}}):e;return t.handle(u).pipe(ce(_=>o&&_.status===401&&this.auth.refreshToken?this.auth.refresh().pipe(le(({accessToken:M})=>{let H=e.clone({setHeaders:{Authorization:`Bearer ${M}`}});return t.handle(H)})):(o&&(_.status===403||_.status===401)&&this.auth.clear(),se(()=>_))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=w({token:n,factory:n.\u0275fac})};function Be(n,e){if(n&1&&(i(0,"p",17),s(1),r()),n&2){let t=p();c(),k(t.err)}}var z=class n{fb=g(Ee);auth=g(v);router=g(E);hide=!0;busy=!1;err;f=this.fb.group({username:["",ie.required],password:["",ie.required]});submit(){if(this.err=void 0,this.f.invalid){this.f.markAllAsTouched();return}this.busy=!0;let{username:e,password:t}=this.f.getRawValue();this.auth.login(e,t).subscribe({next:o=>{this.busy=!1;let a=o?.user?.name??o?.name??o?.profile?.fullName??e;localStorage.setItem("auth_name",(a||"Administrador").toString()),this.router.navigateByUrl("/admin")},error:o=>{this.busy=!1,this.err=o?.error?.message??"Error de login"}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-admin-login"]],decls:24,vars:15,consts:[[1,"auth-wrap"],[1,"login-brand"],["routerLink","/","aria-label","Ir al inicio"],["src","assets/icono.svg","alt","Soy tu Agente","width","200","height","64","loading","eager","decoding","async","fetchpriority","high"],[1,"auth-card"],[3,"ngSubmit","formGroup"],[1,"field"],["for","user"],["id","user","type","text","formControlName","username","placeholder","tu@correo.com","autocomplete","username"],["for","pass"],[1,"password"],["id","pass","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password",3,"type"],["id","toggle-pass","type","button",1,"icon-btn",3,"click","title"],[1,"actions"],["type","button",1,"btn","btn-ghost",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","form-error",4,"ngIf"],[1,"form-error"]],template:function(t,o){t&1&&(i(0,"section",0)(1,"header",1)(2,"a",2),d(3,"img",3),r()(),i(4,"div",4)(5,"h1"),s(6,"Acceso admin"),r(),i(7,"form",5),l("ngSubmit",function(){return o.submit()}),i(8,"div",6)(9,"label",7),s(10,"Usuario"),r(),d(11,"input",8),r(),i(12,"div",6)(13,"label",9),s(14,"Contrase\xF1a"),r(),i(15,"div",10),d(16,"input",11),i(17,"button",12),l("click",function(){return o.hide=!o.hide}),r()()(),i(18,"div",13)(19,"button",14),l("click",function(){return o.f.reset()}),s(20,"Limpiar"),r(),i(21,"button",15),s(22),r()(),y(23,Be,2,1,"p",16),r()()()),t&2&&(c(7),b("formGroup",o.f),c(4),A("invalid",o.f.controls.username.touched&&o.f.controls.username.invalid),c(5),A("invalid",o.f.controls.password.touched&&o.f.controls.password.invalid),b("type",o.hide?"password":"text"),c(),ue("background-image","url(assets/icons/contrasena-de-ojo.png)"),b("title",o.hide?"Mostrar contrase\xF1a":"Ocultar contrase\xF1a"),N("aria-pressed",!o.hide)("aria-label",o.hide?"Mostrar contrase\xF1a":"Ocultar contrase\xF1a"),c(2),b("disabled",o.busy),c(2),b("disabled",o.f.invalid||o.busy),c(),ge(" ",o.busy?"Entrando\u2026":"Entrar"," "),c(),b("ngIf",o.err))},dependencies:[S,j,Le,we,Pe,ke,Oe,Ae,Se],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}[_ngcontent-%COMP%]:root{--brand:#0fb366;--ink:#0b2f34;--muted:#6a7f79;--border:#d0d5dd;--panel:#fff;--surface:#f5f8f7;--shadow:0 10px 30px rgba(16,24,40,.08)}[_nghost-%COMP%]   .auth-wrap[_ngcontent-%COMP%]{min-height:100svh;display:grid;grid-auto-rows:max-content;align-content:start;justify-items:center;row-gap:8px;padding:24px;background:var(--surface)}[_nghost-%COMP%]   .login-brand[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0;padding:0;line-height:0}[_nghost-%COMP%]   .login-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:clamp(140px,18vw,220px);height:auto}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background:var(--panel);border:1px solid #e9efec;border-radius:18px;box-shadow:var(--shadow);padding:clamp(18px,4vw,28px);margin:0}.auth-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 14px;font-weight:900;color:var(--ink);font-size:clamp(20px,2.2vw,24px)}.field[_ngcontent-%COMP%]{display:grid;gap:6px;margin-bottom:14px}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:var(--ink);font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box;display:block;width:100%;height:44px;border-radius:12px;border:1px solid var(--border);background:#fff;padding:0 14px;outline:none;font-size:14px;transition:border-color .15s,box-shadow .15s,background .15s}.password[_ngcontent-%COMP%]{position:relative}.password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:44px;padding-right:44px}.password[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);z-index:2;width:28px;height:28px;padding:0;border:0;border-radius:6px;background-color:transparent;background-repeat:no-repeat;background-position:center;background-size:18px 18px;cursor:pointer;opacity:.9;transition:background-color .15s,opacity .15s}.password[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background-color:#f3f6f5;opacity:1}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9aa7a1}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--brand);box-shadow:0 0 0 4px color-mix(in srgb,var(--brand) 16%,transparent)}.field[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 4px #ef44441a}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:6px}.btn[_ngcontent-%COMP%]{height:40px;padding:0 16px;border-radius:999px;display:inline-flex;align-items:center;gap:8px;font-weight:700;font-size:14px;border:1px solid transparent;cursor:pointer;transition:background .15s,border-color .15s,transform .12s}.btn-primary[_ngcontent-%COMP%]{background:var(--brand);color:#fff;box-shadow:0 8px 18px #0fb36640}.btn-primary[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--brand) 85%,black);transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-ghost[_ngcontent-%COMP%]{background:#fff;color:var(--ink);border-color:var(--border);box-shadow:0 1px 2px #1018280f}.btn-ghost[_ngcontent-%COMP%]:hover{background:#f7faf9;border-color:#c5cdd6;transform:translateY(-1px)}.form-error[_ngcontent-%COMP%]{margin-top:10px;color:#c0362c;background:#fdebea;border:1px solid #f7c5c0;border-radius:10px;padding:10px 12px;font-size:13px}']})};function Ge(n){return!!n?.some(e=>e.toLowerCase()==="admin")}function $e(n){return m(this,null,function*(){let e=g(v),t=g(E);return(yield e.ensureValidSession())?Ge(e.user()?.roles)?!0:t.createUrlTree(["/"]):t.createUrlTree(["/admin/login"],{queryParams:{returnUrl:n}})})}var He=(n,e)=>{let t="/"+e.map(o=>o.path).join("/");return $e(t)};var Ie=[{path:"",pathMatch:"full",loadComponent:()=>import("./chunk-DMYNOQPM.js").then(n=>n.HomeComponent)},{path:"solicitar-agente",loadComponent:()=>import("./chunk-KBAV3MGJ.js").then(n=>n.SolicitarAgenteComponent)},{path:"unirme",redirectTo:"solicitar-agente",pathMatch:"full"},{path:"agentes",loadComponent:()=>import("./chunk-5FLEGY2I.js").then(n=>n.ListComponent)},{path:"agente/:slug",loadComponent:()=>import("./chunk-3LXIURYS.js").then(n=>n.AgenteProfileComponent),resolve:{agent:()=>import("./chunk-FKFSVQR4.js").then(n=>n.agentResolver)}},{path:"404",loadComponent:()=>import("./chunk-VRZLKM6F.js").then(n=>n.NotFoundComponent)},{path:"nosotros",loadComponent:()=>import("./chunk-PP7TSVTZ.js").then(n=>n.NosotrosPage)},{path:"admin/login",component:z},{path:"admin",canMatch:[He],loadComponent:()=>import("./chunk-NZSM4VRZ.js").then(n=>n.AdminDashboardComponent),children:[{path:"solicitudes",loadComponent:()=>import("./chunk-BMTW2RTB.js").then(n=>n.SolicitudesListComponent)},{path:"cuenta",loadComponent:()=>import("./chunk-BECORIMU.js").then(n=>n.CuentaComponent)},{path:"agentes",loadComponent:()=>import("./chunk-UBQNKVNK.js").then(n=>n.AdminAgentesListComponent)},{path:"agregar",loadComponent:()=>import("./chunk-QQPZTLHD.js").then(n=>n.AgentNewPage)},{path:"agentes/:slug/edit",loadComponent:()=>import("./chunk-QQPZTLHD.js").then(n=>n.AgentNewPage)}]},{path:"admin",pathMatch:"full",component:z},{path:"**",redirectTo:""}];var T={facebook:{icon:"assets/icons/facebook.svg",base:"https://facebook.com"},instagram:{icon:"assets/icons/instagram.svg",base:"https://instagram.com"},linkedin:{icon:"assets/icons/linkedin.svg",base:"https://linkedin.com/in"},tiktok:{icon:"assets/icons/tiktok.svg",base:"https://tiktok.com/@"}};function R(n){return typeof n=="string"&&n.trim().length>0}function Ye(n){if(Array.isArray(n?.redes)&&n.redes.every(o=>R(o?.icon)&&R(o?.url)))return n.redes;let e=n?.redes??n?.social??n?.socials??n?.socialLinks;if(e&&typeof e=="object"&&!Array.isArray(e)){let o=[];if(Object.keys(T).forEach(a=>{let u=e[a];if(R(u)){let{icon:_,base:M}=T[a],H=/^https?:\/\//i.test(u)?u:`${M.replace(/\/+$/,"")}/${String(u).replace(/^\/+/,"")}`;o.push({icon:_,url:H})}}),o.length)return o}if(Array.isArray(n?.socials)){let o=[];for(let a of n.socials){let u=String(a?.type||"").toLowerCase(),_=a?.url??a?.handle??"";if(T[u]&&R(_)){let{icon:M,base:H}=T[u],Ve=/^https?:\/\//i.test(_)?_:`${H.replace(/\/+$/,"")}/${String(_).replace(/^\/+/,"")}`;o.push({icon:M,url:Ve})}}if(o.length)return o}let t=[];return Object.keys(T).forEach(o=>{let a=n?.[o];if(R(a)){let{icon:u,base:_}=T[o],M=/^https?:\/\//i.test(a)?a:`${_.replace(/\/+$/,"")}/${String(a).replace(/^\/+/,"")}`;t.push({icon:u,url:M})}}),t.length?t:[]}var X=class n{api=g(Y);list(){return m(this,null,function*(){return(yield O(this.api.list())).map(this.mapToAgent)})}get(e){return m(this,null,function*(){let t=yield O(this.api.get(e));return this.mapToAgent(t)})}create(e){return m(this,null,function*(){let t=yield O(this.api.create(this.mapFromAgent(e)));return this.mapToAgent(t)})}update(e,t){return m(this,null,function*(){let o=yield O(this.api.update(e,this.mapFromAgent(t)));return this.mapToAgent(o)})}remove(e){return m(this,null,function*(){yield O(this.api.delete(e))})}mapToAgent=e=>{let t=Ye(e);return{id:e.id??"",slug:e.slug,nombre:e.nombre,cedula:e.cedula??"",verificado:!!e.verificado,avatar:e.avatar??e.foto??null,ubicacion:e.ubicacion??"",whatsapp:e.whatsapp??null,especialidades:e.especialidades??[],experiencia:e.experiencia??[],servicios:e.servicios??[],certificaciones:e.certificaciones??[],aseguradoras:e.aseguradoras??[],mediaThumbs:e.mediaThumbs??e.fotosMini??[],mediaHero:e.mediaHero??"",redes:t}};mapFromAgent(e){return{id:e.id,slug:e.slug,nombre:e.nombre,ubicacion:e.ubicacion,whatsapp:e.whatsapp,especialidades:e.especialidades,cedula:e.cedula,verificado:e.verificado,avatar:e.avatar??void 0,mediaHero:e.mediaHero,mediaThumbs:e.mediaThumbs,foto:e.avatar??void 0,fotosMini:e.mediaThumbs,servicios:e.servicios,certificaciones:e.certificaciones,aseguradoras:e.aseguradoras,experiencia:e.experiencia,redes:Array.isArray(e.redes)?e.redes:null}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=w({token:n,factory:n.\u0275fac,providedIn:"root"})};var ae={providers:[U(B(),_e()),{provide:be,useClass:Q,multi:!0},{provide:$,useClass:X},pe(),fe({eventCoalescing:!0}),ve(Ie,Me({scrollPositionRestoration:"top",anchorScrolling:"enabled"}))]};var x=[{id:"1",slug:"alondra-cardenas",nombre:"Alondra",cedula:"C\xE9dula X",verificado:!0,ubicacion:"Colima",especialidades:["vehiculos"],experiencia:[],servicios:[],certificaciones:[],aseguradoras:[],mediaThumbs:[],mediaHero:"assets/agents/profile-hero.jpg"}],Z=class n{list(){return m(this,null,function*(){return structuredClone(x)})}get(e){return m(this,null,function*(){let t=x.find(o=>o.slug===e);if(!t)throw new Error("Not found");return structuredClone(t)})}create(e){return m(this,null,function*(){let t={id:crypto.randomUUID(),slug:e.slug,nombre:e.nombre,cedula:e.cedula??"",verificado:!!e.verificado,avatar:e.avatar??null,ubicacion:e.ubicacion??"",whatsapp:e.whatsapp??null,especialidades:e.especialidades??[],experiencia:e.experiencia??[],servicios:e.servicios??[],certificaciones:e.certificaciones??[],aseguradoras:e.aseguradoras??[],mediaThumbs:e.mediaThumbs??[],mediaHero:e.mediaHero??"",redes:e.redes??null};return x.unshift(t),structuredClone(t)})}update(e,t){return m(this,null,function*(){let o=x.findIndex(a=>a.slug===e);if(o<0)throw new Error("Not found");return x[o]=D(I(I({},x[o]),t),{slug:x[o].slug}),structuredClone(x[o])})}remove(e){return m(this,null,function*(){x=x.filter(t=>t.slug!==e)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=w({token:n,factory:n.\u0275fac,providedIn:"root"})};var qe=D(I({},ae),{providers:[...ae.providers??[],U(B()),{provide:$,useExisting:ye.useMock?Z:Y}]});he(W,qe).catch(n=>console.error(n));
