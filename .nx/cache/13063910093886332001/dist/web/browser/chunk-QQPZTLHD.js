import{a as se}from"./chunk-RIVHAWGD.js";import{a as re}from"./chunk-WY27KDWQ.js";import{b as W,c as Z,d as N,e as X,f as Y,g as J,h as ee,i as te,j as ie,k as ae,l as ne}from"./chunk-SNNRYO6Z.js";import"./chunk-RPALSS5Z.js";import{b as K,d as q,e as B,i as Q}from"./chunk-6A4NGTZS.js";import{$a as a,Ka as D,Oa as b,Sb as j,Tb as U,U as P,Wb as H,Z as p,Za as g,_ as m,_a as n,ab as x,ac as $,c as h,eb as R,fb as L,gb as S,ha as y,hb as v,jb as u,nb as z,pb as V,q as M,qb as o,rb as k,sb as O,va as A,za as c,zb as G}from"./chunk-A5EMK4AJ.js";function me(r,t){if(r&1&&(R(0),x(1,"img",39),L()),r&2){let e=u();c(),g("src",e.avatarPreview(),A)}}function ue(r,t){r&1&&(n(0,"div",40)(1,"div",41),o(2,"Arrastra tu foto aqu\xED"),a(),n(3,"div",42),o(4,"o haz click para seleccionarla"),a()())}function fe(r,t){r&1&&(n(0,"small",17),o(1,"Cargando municipios\u2026"),a())}function ve(r,t){r&1&&(n(0,"small",17),o(1," Selecciona estados primero. "),a())}function he(r,t){if(r&1){let e=S();n(0,"label",23)(1,"input",24),v("change",function(s){let d=p(e).$implicit,l=u();return m(l.toggleFromEvent("servicios",d,s))}),a(),o(2),a()}if(r&2){let e=t.$implicit,i=u();c(),g("checked",i.has("servicios",e)),c(),O(" ",e," ")}}function _e(r,t){r&1&&(n(0,"div",40)(1,"div",41),o(2,"Arrastra tus im\xE1genes aqu\xED"),a(),n(3,"div",42),o(4,"o haz click para seleccionarlas"),a(),n(5,"div",43),o(6,"(m\xE1ximo 3)"),a()())}function be(r,t){if(r&1){let e=S();n(0,"div",46),x(1,"img",47),n(2,"button",48),v("click",function(){let s=p(e).index,d=u(2);return m(d.removeGalleryItem(s))}),o(3,"\xD7"),a()()}if(r&2){let e=t.$implicit;c(),g("src",e,A)}}function xe(r,t){if(r&1&&(n(0,"div",44),b(1,be,4,1,"div",45),a()),r&2){let e=u();c(),g("ngForOf",e.galleryPreviews())}}function we(r,t){if(r&1){let e=S();n(0,"label",23)(1,"input",24),v("change",function(s){let d=p(e).$implicit,l=u();return m(l.toggleFromEvent("certificaciones",d,s))}),a(),o(2),a()}if(r&2){let e=t.$implicit,i=u();c(),g("checked",i.has("certificaciones",e)),c(),O(" ",e," ")}}function ye(r,t){if(r&1){let e=S();n(0,"label",23)(1,"input",24),v("change",function(s){let d=p(e).$implicit,l=u();return m(l.toggleFromEvent("aseguradoras",d,s))}),a(),o(2),a()}if(r&2){let e=t.$implicit,i=u();c(),g("checked",i.has("aseguradoras",e)),c(),O(" ",e," ")}}function Ee(r,t){if(r&1){let e=S();n(0,"div",53)(1,"span",54),o(2),a(),n(3,"input",55),v("input",function(s){p(e);let d=u().$implicit,l=u();return m(l.setSocialUsername(d.key,s.target.value))}),a()()}if(r&2){let e=u().$implicit,i=u();c(2),k(e.base),c(),g("value",i.getSocialUsername(e.key))}}function Ce(r,t){if(r&1){let e=S();n(0,"div",49)(1,"label",50)(2,"input",24),v("change",function(s){let d=p(e).$implicit,l=u();return m(l.setSocialEnabled(d.key,s.target.checked))}),a(),x(3,"img",51),n(4,"span"),o(5),a()(),b(6,Ee,4,2,"div",52),a()}if(r&2){let e=t.$implicit,i=u();c(2),g("checked",i.isSocialEnabled(e.key)),c(),g("src",e.icon,A),c(2),k(e.label),c(),g("ngIf",i.isSocialEnabled(e.key))}}function Se(r,t){if(r&1&&(n(0,"span",56),o(1),a()),r&2){let e=u();c(),k(e.serverError())}}function oe(r){return String(r||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").slice(0,80)}var Pe=[{name:"Aguascalientes",slug:"aguascalientes"},{name:"Baja California",slug:"baja-california"},{name:"Baja California Sur",slug:"baja-california-sur"},{name:"Campeche",slug:"campeche"},{name:"Coahuila de Zaragoza",slug:"coahuila-de-zaragoza"},{name:"Colima",slug:"colima"},{name:"Chiapas",slug:"chiapas"},{name:"Chihuahua",slug:"chihuahua"},{name:"Ciudad de M\xE9xico",slug:"ciudad-de-mexico"},{name:"Durango",slug:"durango"},{name:"Guanajuato",slug:"guanajuato"},{name:"Guerrero",slug:"guerrero"},{name:"Hidalgo",slug:"hidalgo"},{name:"Jalisco",slug:"jalisco"},{name:"M\xE9xico",slug:"mexico"},{name:"Michoac\xE1n de Ocampo",slug:"michoacan-de-ocampo"},{name:"Morelos",slug:"morelos"},{name:"Nayarit",slug:"nayarit"},{name:"Nuevo Le\xF3n",slug:"nuevo-leon"},{name:"Oaxaca",slug:"oaxaca"},{name:"Puebla",slug:"puebla"},{name:"Quer\xE9taro",slug:"queretaro"},{name:"Quintana Roo",slug:"quintana-roo"},{name:"San Luis Potos\xED",slug:"san-luis-potosi"},{name:"Sinaloa",slug:"sinaloa"},{name:"Sonora",slug:"sonora"},{name:"Tabasco",slug:"tabasco"},{name:"Tamaulipas",slug:"tamaulipas"},{name:"Tlaxcala",slug:"tlaxcala"},{name:"Veracruz de Ignacio de la Llave",slug:"veracruz-de-ignacio-de-la-llave"},{name:"Yucat\xE1n",slug:"yucatan"},{name:"Zacatecas",slug:"zacatecas"}],Me=["Qualitas Pro 2024","AXA Health Partner","GNP Agente Elite","MetLife Senior"],T={Qualitas:"assets/aseguradoras/Qualitas.png",Allianz:"assets/aseguradoras/Allianz.png",AXA:"assets/aseguradoras/Axa.png",GNP:"assets/aseguradoras/Gnp.png",HDI:"assets/aseguradoras/Hdi.png",INBURSA:"assets/aseguradoras/Inbursa.png",MAPFRE:"assets/aseguradoras/Mapfre.png",MetLife:"assets/aseguradoras/Metlife.png",Primero:"assets/aseguradoras/Primeroseguros.png","Seguros Atlas":"assets/aseguradoras/Segurosatlas.png","Seguros Monterrey":"assets/aseguradoras/Segurosmonterrey.png",Sura:"assets/aseguradoras/Sura.png",Zurich:"assets/aseguradoras/Zurich.png"},Oe=Object.keys(T),de=r=>String(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,""),Ae=Object.fromEntries(Object.entries(T).map(([r,t])=>[de(r),t])),ke=r=>!r||/^https?:\/\//i.test(r)||r.startsWith("assets/")?r:Ae[de(r)]??r,le=Object.fromEntries(Object.entries(T).map(([r,t])=>[t.toLowerCase(),r]));function Ne(r){let t=(r||"").toLowerCase();if(le[t])return le[t];let e=t.split("/").pop()||"";return Object.entries(T).find(([,s])=>s.toLowerCase().endsWith(e))?.[0]??r}var Te={vehiculos:["Autos particulares","Pickups y Vans","Amplia / Limitada","RC"],"hogar-negocio":["Seguro de hogar","PyME","Da\xF1os a terceros","Equipo electr\xF3nico"],"salud-asistencia":["Gastos m\xE9dicos mayores","Seguro dental","Accidentes personales"]},F=[{key:"facebook",label:"Facebook",icon:"assets/icons/facebook.svg",base:"https://facebook.com"},{key:"instagram",label:"Instagram",icon:"assets/icons/instagram.svg",base:"https://instagram.com"},{key:"linkedin",label:"LinkedIn",icon:"assets/icons/linkedin.svg",base:"https://linkedin.com/in"},{key:"tiktok",label:"TikTok",icon:"assets/icons/tiktok.svg",base:"https://tiktok.com/@"}],ce=class r{fb=P(ae);router=P(q);route=P(K);api=P(se);http=P($);loading=y(!1);serverError=y(null);isEdit=y(!1);estadosCat=Pe;_municipios=y([]);_loadingMun=y(!1);loadingMun(){return this._loadingMun()}get allMunicipios(){return this._municipios()}dragOverAvatar=y(!1);dragOverGallery=y(!1);avatarPreview=y(null);galleryPreviews=y([]);socialEnabled=new Set;socialUser=new Map;isSocialEnabled(t){return this.socialEnabled.has(t)}setSocialEnabled(t,e){e?this.socialEnabled.add(t):this.socialEnabled.delete(t)}getSocialUsername(t){return this.socialUser.get(t)??""}setSocialUsername(t,e){this.socialUser.set(t,e?.trim())}form=this.fb.group({slug:[""],nombre:["",[N.required,N.minLength(3)]],cedula:["",[N.required]],estados:this.fb.control([]),municipios:this.fb.control([]),ubicacion:[""],mediaHero:[""],verificado:[!1],avatar:[""],whatsapp:[""],especialidades:this.fb.control([]),servicios:this.fb.control([]),certificaciones:this.fb.control([]),aseguradoras:this.fb.control([]),mediaThumbs:this.fb.control([]),experienciaText:[""]});has(t,e){return(this.form.value[t]??[]).includes(e)}toggleFromEvent(t,e,i){let s=i.target?.checked??!1;this.toggle(t,e,s)}toggle(t,e,i){let s=new Set(this.form.value[t]??[]);if(i?s.add(e):s.delete(e),t==="especialidades"){let d=new Set(this.availableServices()),l=new Set(this.form.value.servicios??[]);for(let w of Array.from(l))d.has(w)||l.delete(w);this.form.patchValue({servicios:Array.from(l)})}this.form.patchValue({[t]:Array.from(s)})}availableServices(){let t=this.form.value.especialidades??[],e=new Set;return t.forEach(i=>(Te[i]||[]).forEach(s=>e.add(s))),Array.from(e)}loadMunicipiosForMany(t){return h(this,null,function*(){this._loadingMun.set(!0);let e=new Set;yield Promise.all(t.map(l=>h(this,null,function*(){let f=`assets/locations/municipios/${this.estadosCat.find(C=>C.name===l)?.slug??oe(l)}.json`;try{((yield M(this.http.get(f)))||[]).forEach(_=>{_?.trim()&&e.add(_.trim())})}catch{}})));let i=Array.from(e).sort((l,w)=>l.localeCompare(w,"es"));this._municipios.set(i);let s=new Set(this.form.value.municipios??[]),d=!1;for(let l of Array.from(s))e.has(l)||(s.delete(l),d=!0);d&&this.form.patchValue({municipios:Array.from(s)}),this._loadingMun.set(!1)})}updateUbicacionFromSelections(){let t=this.form.value.estados??[],i=[(this.form.value.municipios??[])[0],t[0]].filter(Boolean).join(", ");this.form.patchValue({ubicacion:i})}onDragOver(t,e){e.preventDefault(),e.stopPropagation(),t==="avatar"?this.dragOverAvatar.set(!0):this.dragOverGallery.set(!0)}onDragLeave(t){t==="avatar"?this.dragOverAvatar.set(!1):this.dragOverGallery.set(!1)}onAvatarDrop(t){return h(this,null,function*(){t.preventDefault(),t.stopPropagation(),this.dragOverAvatar.set(!1);let e=t.dataTransfer?.files?.[0];e&&(yield this.handleAvatarFile(e))})}onAvatarSelect(t){return h(this,null,function*(){let e=t.target,i=e.files?.[0];i&&(yield this.handleAvatarFile(i)),e.value=""})}handleAvatarFile(t){return h(this,null,function*(){this.avatarPreview.set(URL.createObjectURL(t));let e=yield this.upload(t);this.form.patchValue({avatar:e})})}onGalleryDrop(t){return h(this,null,function*(){t.preventDefault(),t.stopPropagation();let e=Array.from(t.dataTransfer?.files||[]);yield this.handleGalleryFiles(e)})}onGallerySelect(t){return h(this,null,function*(){let e=t.target,i=Array.from(e.files||[]);yield this.handleGalleryFiles(i),e.value=""})}handleGalleryFiles(t){return h(this,null,function*(){if(!t.length)return;let e=[...this.galleryPreviews()],i=[...this.form.value.mediaThumbs??[]];for(let s of t){if(e.length>=3||i.length>=3)break;e.push(URL.createObjectURL(s));let d=yield this.upload(s);i.push(d)}this.galleryPreviews.set(e.slice(0,3)),this.form.patchValue({mediaThumbs:i.slice(0,3)}),!this.form.value.mediaHero&&i.length>0&&this.form.patchValue({mediaHero:i[0]})})}removeGalleryItem(t){let e=[...this.galleryPreviews()];e.splice(t,1),this.galleryPreviews.set(e);let i=[...this.form.value.mediaThumbs??[]];if(i.splice(t,1),this.form.patchValue({mediaThumbs:i}),t===0&&this.form.value.mediaHero){let s=i[0]??"";this.form.patchValue({mediaHero:s})}}getSlug(t){return t.get("slug")}ngOnInit(){return h(this,null,function*(){this.form.get("estados").valueChanges.subscribe(t=>{let e=t??[];this.loadMunicipiosForMany(e),this.updateUbicacionFromSelections()}),this.form.get("municipios").valueChanges.subscribe(()=>{this.updateUbicacionFromSelections()}),this.route.paramMap.subscribe(t=>h(this,null,function*(){let e=this.getSlug(t);if(this.serverError.set(null),!e){this.isEdit.set(!1),this.form.reset({slug:"",nombre:"",cedula:"",estados:[],municipios:[],ubicacion:"",mediaHero:"",verificado:!1,avatar:"",whatsapp:"",especialidades:[],servicios:[],certificaciones:[],aseguradoras:[],mediaThumbs:[],experienciaText:""}),this.avatarPreview.set(null),this.galleryPreviews.set([]),this._municipios.set([]),this._loadingMun.set(!1);return}this.isEdit.set(!0),this.loading.set(!0);try{let i=yield M(this.api.get(e));this.fillFromAgent(i)}catch{this.serverError.set("No se pudo cargar el agente.")}finally{this.loading.set(!1)}}))})}fillFromAgent(t){let[e,i]=String(t.ubicacion||"").split(",").map(E=>E.trim()),s=i?[i]:[],d=e?[e]:[],l=(t.aseguradoras??[]).map(Ne);this.avatarPreview.set(t.avatar||null),this.galleryPreviews.set([...t.mediaThumbs??[]].slice(0,3)),this.socialEnabled.clear(),this.socialUser.clear();for(let E of t.redes??[]){let f=F.find(I=>I.icon===E.icon);if(!f)continue;let C=f.base.replace(/\/+$/,""),_=E.url||"";_.toLowerCase().startsWith(C.toLowerCase())&&(_=_.substring(C.length).replace(/^\/+/,"")),this.setSocialEnabled(f.key,!0),this.setSocialUsername(f.key,_)}this.form.reset(),this.form.patchValue({slug:t.slug||"",nombre:t.nombre||"",cedula:t.cedula||"",estados:s,municipios:d,ubicacion:t.ubicacion||"",mediaHero:t.mediaHero||(t.mediaThumbs?.[0]??""),verificado:!!t.verificado,avatar:t.avatar||"",whatsapp:t.whatsapp||"",especialidades:t.especialidades??[],servicios:t.servicios??[],certificaciones:t.certificaciones??[],aseguradoras:l,mediaThumbs:t.mediaThumbs??[],experienciaText:(t.experiencia??[]).join(`
`)});let w=this.form.value.estados??[];w.length&&this.loadMunicipiosForMany(w)}save(){return h(this,null,function*(){this.serverError.set(null);let t=Array.from(this.socialEnabled).map(f=>{let C=F.find(pe=>pe.key===f),_=this.socialUser.get(f)??"";if(!_)return null;let ge=/^https?:\/\//i.test(_)?_:`${C.base.replace(/\/+$/,"")}/${_.replace(/^\/+/,"")}`;return{icon:C.icon,url:ge}}).filter(Boolean),e=this.form.value;if(!e.nombre?.trim()){this.serverError.set("El nombre es obligatorio.");return}if(!e.cedula?.trim()){this.serverError.set("La c\xE9dula es obligatoria.");return}let i=(e.slug||oe(e.nombre||"")).trim(),s=(e.mediaHero||(e.mediaThumbs?.[0]??"")).trim(),d=e.estados??[],l=e.municipios??[],w=(e.ubicacion||[l[0],d[0]].filter(Boolean).join(", ")).trim(),E={slug:i,nombre:(e.nombre||"").trim(),cedula:(e.cedula||"").trim(),ubicacion:w,mediaHero:s,avatar:e.avatar||"",whatsapp:(e.whatsapp||"").trim()||null,verificado:!!e.verificado,especialidades:e.especialidades??[],servicios:e.servicios??[],certificaciones:e.certificaciones??[],aseguradoras:(e.aseguradoras??[]).map(ke),mediaThumbs:e.mediaThumbs??[],experiencia:(e.experienciaText||"").split(`
`).map(f=>f.trim()).filter(Boolean),redes:t.length?t:null};this.loading.set(!0);try{if(this.isEdit()){let f=this.route.snapshot.paramMap.get("slug")||i;yield M(this.api.update(f,E))}else yield M(this.api.create(E));this.router.navigate(["/admin/dashboard/agentes"])}catch(f){this.serverError.set(f?.message??"Error al guardar")}finally{this.loading.set(!1)}})}upload(t){return h(this,null,function*(){let e=new FormData;e.append("file",t);let i=yield fetch("http://localhost:3000/api/upload",{method:"POST",body:e});if(!i.ok){let d=yield i.text().catch(()=>"");throw new Error(`Fallo al subir imagen (${i.status}): ${d}`)}return(yield i.json()).url})}CERTS=Me;CARRIERS=Oe;SOCIALS=F;static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["app-agent-new"]],decls:111,vars:24,consts:[["avatarFile",""],["dzAvatarText",""],["galFile",""],[1,"admin"],[1,"container"],[3,"ngSubmit","formGroup"],[1,"grid"],[1,"form-group","full"],[1,"req"],[1,"dz","dz--big",3,"dragover","dragleave","drop"],["type","file","accept","image/*",3,"change"],[4,"ngIf","ngIfElse"],[1,"form-group"],["type","text","formControlName","nombre","placeholder","Nombre del agente"],["type","text","formControlName","cedula","placeholder","C\xE9dula del agente"],["type","text","formControlName","whatsapp","placeholder","5213121234567","inputmode","numeric"],["formControlName","estados","labelKey","name","valueKey","name","placeholder","Selecciona uno o varios estados",3,"options"],[1,"hint"],["formControlName","municipios","placeholder","Selecciona municipios",3,"options","loading"],["class","hint",4,"ngIf"],[1,"row","chk","full"],["type","checkbox","formControlName","verificado"],[1,"chip-group"],[1,"chip"],["type","checkbox",3,"change","checked"],["class","chip",4,"ngFor","ngForOf"],["type","file","accept","image/*","multiple","",3,"change"],["class","placeholder",4,"ngIf"],["class","previews",4,"ngIf"],["rows","3","formControlName","experienciaText","maxlength","250","placeholder","Ej. +5 a\xF1os ayudando a familias y empresas."],[1,"field-title"],[1,"socials"],["class","social",4,"ngFor","ngForOf"],[1,"form-footer"],[1,"left"],["class","error",4,"ngIf"],[1,"right"],["routerLink","/agentes",1,"btn-ghost"],["type","submit",1,"btn-primary",3,"disabled"],["alt","Vista previa",3,"src"],[1,"placeholder"],[1,"dz-title"],[1,"dz-sub"],[1,"dz-note"],[1,"previews"],["class","preview",4,"ngFor","ngForOf"],[1,"preview"],["alt","thumb",3,"src"],["type","button","aria-label","Quitar imagen",1,"remove-btn",3,"click"],[1,"social"],[1,"row","chk"],["alt","",3,"src"],["class","social-input",4,"ngIf"],[1,"social-input"],[1,"base"],["type","text","placeholder","usuario",3,"input","value"],[1,"error"]],template:function(e,i){if(e&1){let s=S();n(0,"section",3)(1,"div",4)(2,"h1"),o(3,"Nuevo agente"),a(),n(4,"form",5),v("ngSubmit",function(){return p(s),m(i.save())}),n(5,"div",6)(6,"div",7)(7,"span"),o(8,"Foto de perfil "),n(9,"span",8),o(10,"*"),a()(),n(11,"div",9),v("dragover",function(l){return p(s),m(i.onDragOver("avatar",l))})("dragleave",function(){return p(s),m(i.onDragLeave("avatar"))})("drop",function(l){return p(s),m(i.onAvatarDrop(l))}),n(12,"input",10,0),v("change",function(l){return p(s),m(i.onAvatarSelect(l))}),a(),b(14,me,2,1,"ng-container",11)(15,ue,5,0,"ng-template",null,1,G),a()(),n(17,"label",12)(18,"span"),o(19,"Nombre "),n(20,"span",8),o(21,"*"),a()(),x(22,"input",13),a(),n(23,"label",12)(24,"span"),o(25,"C\xE9dula "),n(26,"span",8),o(27,"*"),a()(),x(28,"input",14),a(),n(29,"label",12)(30,"span"),o(31,"WhatsApp"),a(),x(32,"input",15),a(),n(33,"div",12)(34,"span"),o(35,"Estados"),a(),x(36,"app-multi-check",16),n(37,"small",17),o(38,"Puedes seleccionar varios."),a()(),n(39,"div",12)(40,"span"),o(41,"Municipios"),a(),x(42,"app-multi-check",18),b(43,fe,2,0,"small",19)(44,ve,2,0,"small",19),a(),n(45,"label",20),x(46,"input",21),n(47,"span"),o(48,"Verificado"),a()(),n(49,"div",7)(50,"span"),o(51,"Especialidades"),a(),n(52,"div",22)(53,"label",23)(54,"input",24),v("change",function(l){return p(s),m(i.toggleFromEvent("especialidades","vehiculos",l))}),a(),o(55," Veh\xEDculos "),a(),n(56,"label",23)(57,"input",24),v("change",function(l){return p(s),m(i.toggleFromEvent("especialidades","hogar-negocio",l))}),a(),o(58," Hogar y Negocio "),a(),n(59,"label",23)(60,"input",24),v("change",function(l){return p(s),m(i.toggleFromEvent("especialidades","salud-asistencia",l))}),a(),o(61," Salud y Asistencia "),a()(),n(62,"small",17),o(63,"Puedes seleccionar varias."),a()(),n(64,"div",7)(65,"span"),o(66,"Servicios"),a(),n(67,"div",22),b(68,he,3,2,"label",25),a(),n(69,"small",17),o(70,"Se muestran seg\xFAn tus especialidades seleccionadas."),a()(),n(71,"div",7)(72,"span"),o(73,"Galer\xEDa"),a(),n(74,"div",9),v("dragover",function(l){return p(s),m(i.onDragOver("gallery",l))})("dragleave",function(){return p(s),m(i.onDragLeave("gallery"))})("drop",function(l){return p(s),m(i.onGalleryDrop(l))}),n(75,"input",26,2),v("change",function(l){return p(s),m(i.onGallerySelect(l))}),a(),b(77,_e,7,0,"div",27)(78,xe,2,1,"div",28),a(),n(79,"small",17),o(80,"Se guardar\xE1n hasta 3 URLs en "),n(81,"code"),o(82,"mediaThumbs"),a(),o(83,"."),a()(),n(84,"label",7)(85,"span"),o(86,"Experiencia (m\xE1x. 250 caracteres)"),a(),x(87,"textarea",29),a(),n(88,"div",7)(89,"span"),o(90,"Certificaciones"),a(),n(91,"div",22),b(92,we,3,2,"label",25),a()(),n(93,"div",7)(94,"span"),o(95,"Aseguradoras"),a(),n(96,"div",22),b(97,ye,3,2,"label",25),a()(),n(98,"div",7)(99,"div",30),o(100,"Redes sociales"),a(),n(101,"div",31),b(102,Ce,7,4,"div",32),a()()(),n(103,"div",33)(104,"div",34),b(105,Se,2,1,"span",35),a(),n(106,"div",36)(107,"a",37),o(108,"Cancelar"),a(),n(109,"button",38),o(110),a()()()()()()}if(e&2){let s=z(16);c(4),g("formGroup",i.form),c(7),V("dragover",i.dragOverAvatar()),c(3),g("ngIf",i.avatarPreview())("ngIfElse",s),c(22),g("options",i.estadosCat),c(6),g("options",i.allMunicipios)("loading",i.loadingMun()),c(),g("ngIf",i.loadingMun()),c(),g("ngIf",!i.loadingMun()&&i.allMunicipios.length===0),c(10),g("checked",i.has("especialidades","vehiculos")),c(3),g("checked",i.has("especialidades","hogar-negocio")),c(3),g("checked",i.has("especialidades","salud-asistencia")),c(8),g("ngForOf",i.availableServices()),c(6),V("dragover",i.dragOverGallery()),c(3),g("ngIf",!i.galleryPreviews().length),c(),g("ngIf",i.galleryPreviews().length),c(14),g("ngForOf",i.CERTS),c(5),g("ngForOf",i.CARRIERS),c(5),g("ngForOf",i.SOCIALS),c(3),g("ngIf",i.serverError()),c(4),g("disabled",i.form.invalid||i.loading()),c(),O(" ",i.loading()?"Guardando\u2026":"Guardar agente"," ")}},dependencies:[H,j,U,ne,J,Z,W,X,Y,ie,ee,te,Q,B,re],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}[_ngcontent-%COMP%]:root{--brand: #0fb366;--brand-dark: #0a7c4b;--ink: #1d2939;--muted: #667085;--border: #e5e7eb;--radius: 14px;--shadow: 0 8px 20px rgba(16, 24, 40, .08)}.admin[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:980px;margin:0 auto;padding:24px 12px}h1[_ngcontent-%COMP%]{font-size:28px;margin-bottom:20px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:18px}.form-group[_ngcontent-%COMP%]{display:grid;gap:8px}.form-group.full[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:var(--ink);font-weight:600}.req[_ngcontent-%COMP%]{color:#e11d48}.input[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;border:1px solid var(--border);border-radius:999px;min-height:44px;padding:10px 14px;outline:none;background:#fff}textarea[_ngcontent-%COMP%]{border-radius:12px;min-height:96px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:var(--brand);box-shadow:0 0 0 3px #0fb36626}.chip-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:999px;cursor:pointer}.chip[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{accent-color:var(--brand)}.row.chk[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px}.row.chk[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{accent-color:var(--brand)}.dz[_ngcontent-%COMP%]{position:relative;border:2px dashed var(--border);border-radius:var(--radius);display:grid;place-items:center;min-height:180px;background:#fff}.dz--big[_ngcontent-%COMP%]{min-height:220px}.dz.dragover[_ngcontent-%COMP%]{border-color:var(--brand);box-shadow:0 0 0 3px #0fb36626}.dz[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;opacity:0;cursor:pointer}.dz[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:calc(var(--radius) - 4px)}.placeholder[_ngcontent-%COMP%]{text-align:center;color:var(--muted)}.dz-title[_ngcontent-%COMP%]{font-weight:700;color:var(--ink)}.dz-sub[_ngcontent-%COMP%]{font-size:14px}.dz-note[_ngcontent-%COMP%]{font-size:12px;color:var(--muted);margin-top:8px}.previews[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.preview[_ngcontent-%COMP%]{position:relative;width:140px;aspect-ratio:1/1;border-radius:12px;overflow:hidden;border:1px solid var(--border)}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.remove-btn[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px;border:0;border-radius:999px;width:26px;height:26px;display:grid;place-items:center;background:#fff;color:#111;cursor:pointer;box-shadow:var(--shadow)}.field-title[_ngcontent-%COMP%]{font-weight:700;color:var(--ink)}.socials[_ngcontent-%COMP%]{display:grid;gap:12px}.social[_ngcontent-%COMP%]{display:grid;gap:8px;padding:12px;border:1px solid var(--border);border-radius:12px}.social[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.social-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.social-input[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]{color:var(--muted);white-space:nowrap}.social-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.form-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:18px;padding-top:14px;border-top:1px solid var(--border)}.error[_ngcontent-%COMP%]{color:#b91c1c}.btn-primary[_ngcontent-%COMP%], .btn-ghost[_ngcontent-%COMP%], .btn-plus[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;height:40px;padding:0 16px;border-radius:999px;border:1px solid transparent;cursor:pointer;font-weight:700}.btn-primary[_ngcontent-%COMP%]{background:var(--brand);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--brand-dark)}.btn-ghost[_ngcontent-%COMP%]{background:#fff;border-color:var(--border);color:var(--ink)}.btn-ghost[_ngcontent-%COMP%]:hover{border-color:var(--brand);color:var(--brand)}.btn-plus[_ngcontent-%COMP%]{width:40px;padding:0;font-size:20px;background:#fff;border:1px solid var(--border)}.btn-plus[_ngcontent-%COMP%]:hover{border-color:var(--brand);color:var(--brand)}"]})};export{ce as AgentNewPage};
