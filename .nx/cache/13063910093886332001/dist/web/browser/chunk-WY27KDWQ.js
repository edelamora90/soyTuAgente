import{a as F}from"./chunk-SNNRYO6Z.js";import{$a as a,Ka as b,O as C,Oa as f,Sb as E,Tb as I,Vb as T,Wb as V,Ya as v,Z as d,Za as p,_ as u,_a as l,gb as m,hb as g,jb as s,nb as y,pb as O,qb as c,rb as h,sb as k,tb as M,wb as S,yb as w,za as o,zb as P}from"./chunk-A5EMK4AJ.js";function A(n,e){if(n&1&&(l(0,"span",8),c(1),a()),n&2){let t=e.$implicit;o(),h(t)}}function N(n,e){if(n&1&&(l(0,"span",8),c(1),a()),n&2){let t=s(2);o(),k("+",t.displaySelected.length-3)}}function j(n,e){if(n&1&&(l(0,"span",5),f(1,A,2,1,"span",6),S(2,"slice"),f(3,N,2,1,"span",7),a()),n&2){let t=s();o(),p("ngForOf",w(2,2,t.displaySelected,0,3)),o(2),p("ngIf",t.displaySelected.length>3)}}function q(n,e){if(n&1&&(l(0,"span",9),c(1),a()),n&2){let t=s();o(),h(t.placeholder)}}function z(n,e){n&1&&(l(0,"div",17),c(1,"Cargando\u2026"),a())}function D(n,e){if(n&1){let t=m();l(0,"label",21)(1,"input",22),g("change",function(r){let _=d(t).$implicit,x=s(3);return u(x.toggleValue(x.valOf(_),r.target.checked))}),a(),l(2,"span"),c(3),a()()}if(n&2){let t=e.$implicit,i=s(3);o(),p("checked",i.isSelected(i.valOf(t)))("disabled",i.disabled),o(2),h(i.labelOf(t))}}function L(n,e){n&1&&(l(0,"div",23),c(1,"Sin resultados."),a())}function R(n,e){if(n&1&&(l(0,"div",18),f(1,D,4,3,"label",19)(2,L,2,0,"div",20),a()),n&2){let t=s(2);o(),p("ngForOf",t.filtered),o(),p("ngIf",t.filtered.length===0)}}function B(n,e){if(n&1){let t=m();l(0,"div",10)(1,"div",11)(2,"input",12),g("input",function(r){d(t);let _=s();return u(_.q=r.target.value)}),a(),l(3,"button",13),g("click",function(){d(t);let r=s();return u(r.selectAll())}),c(4,"Todos"),a(),l(5,"button",13),g("click",function(){d(t);let r=s();return u(r.clear())}),c(6,"Limpiar"),a()(),f(7,z,2,0,"div",14)(8,R,3,2,"div",15),l(9,"div",16)(10,"button",13),g("click",function(){d(t);let r=s();return u(r.close())}),c(11,"Cerrar"),a()()()}if(n&2){let t=s();o(2),p("value",t.q),o(5),p("ngIf",t.loading),o(),p("ngIf",!t.loading)}}var K=class n{options=[];placeholder="Selecciona\u2026";disabled=!1;loading=!1;labelKey=null;valueKey=null;labelFn;valueFn;open=!1;q="";selected=new Set;get filtered(){let e=this.q.trim().toLowerCase();return e?this.options.filter(t=>this.labelOf(t).toLowerCase().includes(e)):this.options}get displaySelected(){if(!this.options?.length||this.selected.size===0)return[];let e=[];for(let t of this.options){let i=this.valOf(t);this.selected.has(i)&&e.push(this.labelOf(t))}return e}labelOf(e){if(this.labelFn)return this.labelFn(e);if(this.labelKey&&typeof e=="object"&&e){let t=e[this.labelKey];return String(t??"")}return String(e??"")}valOf(e){return this.valueFn?this.valueFn(e):this.valueKey&&typeof e=="object"&&e?e[this.valueKey]:e}toggleOpen(){this.disabled||(this.open=!this.open,this.open&&this.onTouched())}close(){this.open=!1}isSelected(e){return this.selected.has(e)}toggleValue(e,t){t?this.selected.add(e):this.selected.delete(e),this.emit()}selectAll(){for(let e of this.filtered)this.selected.add(this.valOf(e));this.emit()}clear(){this.selected.clear(),this.emit()}onChange=()=>{};onTouched=()=>{};writeValue(e){let t=Array.isArray(e)?e:e?[e]:[];this.selected=new Set(t)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}emit(){this.onChange(Array.from(this.selected))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-multi-check"]],inputs:{options:"options",placeholder:"placeholder",disabled:"disabled",loading:"loading",labelKey:"labelKey",valueKey:"valueKey",labelFn:"labelFn",valueFn:"valueFn"},features:[M([{provide:F,useExisting:C(()=>n),multi:!0}])],decls:7,vars:6,consts:[["ph",""],["type","button",1,"btn",3,"click"],["class","sel",4,"ngIf","ngIfElse"],[1,"chev"],["class","panel",4,"ngIf"],[1,"sel"],["class","badge",4,"ngFor","ngForOf"],["class","badge",4,"ngIf"],[1,"badge"],[1,"ph"],[1,"panel"],[1,"tools"],["type","search","placeholder","Buscar...",3,"input","value"],["type","button",1,"btn-sm",3,"click"],["class","loading",4,"ngIf"],["class","list",4,"ngIf"],[1,"actions"],[1,"loading"],[1,"list"],["class","item",4,"ngFor","ngForOf"],["class","empty",4,"ngIf"],[1,"item"],["type","checkbox",3,"change","checked","disabled"],[1,"empty"]],template:function(t,i){if(t&1){let r=m();l(0,"button",1),g("click",function(){return d(r),u(i.toggleOpen())}),f(1,j,4,6,"span",2)(2,q,2,1,"ng-template",null,0,P),l(4,"span",3),c(5,"\u25BE"),a()(),f(6,B,12,3,"div",4)}if(t&2){let r=y(3);O("disabled",i.disabled),v("aria-expanded",i.open),o(),p("ngIf",i.displaySelected.length)("ngIfElse",r),o(5),p("ngIf",i.open)}},dependencies:[V,E,I,T],styles:["[_nghost-%COMP%]{display:block;position:relative}.btn[_ngcontent-%COMP%]{width:100%;min-height:40px;border:1px solid #d0d5dd;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 12px;cursor:pointer}.btn.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:default}.btn[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]{color:#6a7f79}.btn[_ngcontent-%COMP%]   .sel[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{background:#f2f4f7;border:1px solid #e5e7eb;padding:2px 8px;border-radius:999px;font-size:12px;font-weight:700}.chev[_ngcontent-%COMP%]{opacity:.7;margin-left:auto}.panel[_ngcontent-%COMP%]{position:absolute;left:0;right:0;z-index:40;margin-top:6px;background:#fff;border:1px solid #e6ece9;border-radius:12px;box-shadow:0 10px 30px #1018281f;padding:8px;display:grid;gap:8px}.tools[_ngcontent-%COMP%]{display:flex;gap:6px}.tools[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{flex:1;border:1px solid #d0d5dd;border-radius:8px;height:34px;padding:0 8px}.btn-sm[_ngcontent-%COMP%]{height:34px;padding:0 10px;border:1px solid #d0d5dd;border-radius:8px;background:#fff;font-weight:700;cursor:pointer}.list[_ngcontent-%COMP%]{max-height:260px;overflow:auto;border:1px solid #eef2f1;border-radius:8px;padding:6px;display:grid;gap:6px}.item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:4px 6px;border-radius:8px}.item[_ngcontent-%COMP%]:hover{background:#f7faf9}.empty[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{color:#6a7f79;font-size:12px;padding:6px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:6px}"]})};export{K as a};
